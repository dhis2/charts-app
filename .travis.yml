language: node_js
node_js:
- '6'
cache:
  directories:
  - node_modules
script:
- npm run build
after_success:
- if ( [ "$TRAVIS_BRANCH" == "master" ] || [ ! -z "$TRAVIS_TAG" ] ) && [ "$TRAVIS_REPO_SLUG"
  == "dhis2/charts-app" ]  &&  [ "$TRAVIS_PULL_REQUEST" == "false" ] ; then mvn clean
  deploy --settings deploy/settings.xml && exit 0; fi
env:
  global:
  - secure: NRmEMoY9w+zabovkhPpUxmsF3Utk18uQ95Mj2wkJnrYkM01hW19F6433sqjLblCx4joR9gg/j9OtwqAGi7aBMA/V9eT+NlHjSPm/6nsztQ2+bvJFqSyMUEvbreQUlbrWUwFfCvPo+db/KJYBE445QjqWSeZBII2XRxz3/JQ/FK2JtHDGdx6mc6FpQXuLoNWnjM7Zg15TPXCnH9YGE4pqISTyf7ZS9ACuqVLARz/gpiBXJiFJGFkrmR64bCwmFqMKnWhx82PnOxVzX2WT78rzkwSUdR9x5M+sNIU2Utt8n8GdeOW8UpXtLH5WcaEsGPN9Y2HWQRizh7dtp429Zcsqaqi2LCbzpwrwX1OIXT7ghoTlKtP2a61fTEPkWbmbKkc74wf31MzqBII4Y6IJ1uwIYZjQKzqbKQfjlhb6mtfGHI8K6Q8mpTFy4x96RjjOYA7BSuHMldgACUPOHBinnnSrnS0Vs+QQALsJlDrIWHU7E9MM2BK/lTbE2KbLJWd1VRRcn0egg3MWTI5Psf+QD/3dZp5WaDAlYLs3avDWZ+VkAcI5+OBCX4E09uRdsMHt7LwVBHF0x+bKwFJsLDVOV9HiTth2SJ7MVZHNIrtR+UzaCLwg8bvO/HQMFSSrRj1OdOim7XdtIwSJzi1aHIsnnlq9K99NsgE24sVBdN90jMPxS1k=
  - secure: RzECGs6CBraVy3qL0CxXciSWWXm5+aAg5JS4UfWGKUg/eS/HCiy9Cwoha+0QujekAHRBe01FZ0jx/yFCENL1MawDhIGqhtYHjn9pdXBrYIJ3b8+CpfemnyNPWBFqzkRvaImsWb5fEz3cFO2rxPQTiYw1+Gphozuzl4K3irYtHsngSi8BnzWISxDF17E7Tl1OCWNUR73Keqz+iYvXis/8gBIeO0fxpzp/FcHLmNz0hJK13WQgnAXS1Jzyx2p7Lp5OqphC9ee8tslyr6wdsLSvAH1Q7t0StAM++WWkkSXIUgBSyAYDNAEeogjleOt8YO/E3qnDiHLh/Outp0+6VZnnUQ2/mSW+vaFnRz5OcW55V7N5x+ZxHfNoIbbFKQJ/C0p66RcBPxzcAJG2QE+GPFsaX/HQjhPKMlKoCLtfxjtRno4nqhNm8eD2pU0PC9OuAaJ5ez4DyYMaKCw4m5VlpmLa3qUNawiAQQPPWCD39GLVLVaysJP8TJb4egIvBtmSG9gszNVywF2ZEaCR9+vu6cfSIYjKPsciJvABuGSiTeAqkxyuYTOK0fSeWlgG/IdPRfqR+I4Va2LsyoqFSAKwAM/UmggmU+xACP+j7TiLDl4qNcTuriH8SCgbgrVERelwe0DR+PXP2pF3SAUE7szJNTaKsGUNBH5nS12eK+wZj/Vra88=
notifications:
  slack:
    secure: J4GKn5vY7RmegqytRDM9Au3qFO6igMAYysZfc/OyDC+yYhz2XkVPVrbUAeLQ4fdX2SgOx5O/cmSVtvs0S8L9XtKTmJIYxVJjVTZgVmjHkImEwqKHWs6pdXPNMPzbsvFKv6QZtRHtVHvrg51vIGn5KLpWxTD6rhvH2hY8q9OO5TbUjbaXgQNqYYlwa0x6K8nTDscBSXb3kRzqqsNKKRfOUK+pb0LIzM0llP/FQbBqj3glWHRJCf7bWGi6zFqwIRg+AmG714E1aiKG7qorQWgAng9znTZ7SpobgiR6WOB7i2EqtnTAHUzrRS4kO/wxUpBCwWEpUwn+73f8axXSY7qYUPiJh18tOTyd5/2iYOe6FX3lX33Py3ePksYpNfmynFxPS1jzv6HghcTLsJ5DwlU4DewhLGeO1D2JY6uA6FmWeXF0BJAD/BEMhjIRb1f/kEv75f7tpyA+1jAzv2uQg+uiOZZKmkog0810WF8SmrS63xYY/bn137RYdYHwJA6wUxWnPnbzlwPQOF39U5t2tacJVJpxMbg4877zI4djeDWqTRFK2xzg24QVh4x17J8J+yr0OlnDkYU03yGkhRyi5t2ay1k3fS2xnMS/vjD509wkAnLFy5596vvu6sRlLP9s3QOZJWgagJbof/iJDk7W39kOWpg17eMPXZQISFEcAMj/eh8=
    on_success: change
    on_failure: always
