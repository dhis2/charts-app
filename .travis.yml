language: node_js
node_js:
- '6'
cache:
  directories:
  - node_modules
script:
- npm run build
after_success:
- if ( [ "$TRAVIS_BRANCH" == "master" ] || [ ! -z "$TRAVIS_TAG" ] ) && [ "$TRAVIS_REPO_SLUG"
  == "dhis2/charts-app" ]  &&  [ "$TRAVIS_PULL_REQUEST" == "false" ] ; then mvn clean
  deploy --settings deploy/settings.xml && exit 0; fi
env:
  global:
  - secure: V9Ts+kvbKmuuV6NI3Sqj6ihSgPvOICpgoUa6236w79dKZqHlFDIzBHB/rcQqcVL7k2V9KbGtxt6UswWw+T3wozBr0qQuv4t7CwbuJMvIqE323HHluhWMXWj4ugWqjXsiLN5yF/EBENrnsP9O49VUXCvyi4j5d75zdpd8/GObHbm72MDUYxUl131FOnU9G5NdfNcmoD4Y+Hadkrz3tKIMSONrpcCacQtZlZqPbicB4LZo7L6CAahJvXSCY1vdQULMzHfklMXZYQqsDmAaClkytlm8XXdXatk9gO4GAdovCoss1srfNhpO7BCswIAEcnAnsU07U+sF6ToRjhbMR+d9n9n5px47iY6wQEIc23XBwy023DG9Z0zMd/mgtQQsTk8Ztzr9kV9WNZaVzFVmAESIdKm/4WUr7viFoJcBtIkUfMInd5t+zjUgIMdLhkeUgwOlMYsMKQZ0ObNrTlJ/NSgS1osNDd1qq1n31s2JsGFjJwVu4x6YL09ku+AdD0YCA2SNbiks/9yxsV3azLfEfEJarnTV7p7edE0tpG+OAG1+evtIRRrWrS7xNQavyrT9Pr6g8GBYngmDGlcb+VU8ZlGgmnRy6PAT2M7uyeqZCkqW+sYNkwafpOHpvsMrkM9fWExp/8cukz4Rc0QuY9Su39p0KRiPNCW+QfqDzjVqIdiZM6I=
  - secure: kwSeNApBtT9q09XMMVUCfZ+FjVylosz79OxDqN3x51Hy1+I2/HV4w2qtXi8rZrWdW1ripGoQuv7pW//Rk4YAXXn7kUxisJ18jDIQw/AECJYV91jwx7DnBKdKuusjWA78R2XCkwSiW+ehOsWQm1Ywv/gGkYvhwDIfI++ZXcd7gIAdlXnlxMgVKzWiyCAHEXX+D5UbYrC/U2PkGxSVoCs9nENkgZlb/xZzJIqe7mHuocVcF0SRvbM0sXPivr0PGEE4xy3sDngiZQHHRfe+XrvfAIbxmtk34jocYyuq/khgE47aW9kW+gNO8s6NeF9FQbx+WFBEkUxa2kCbT3v3PdmE3sjqReaoMkyDKGO6MMmyu+3UdF2eyTaXmjjrqLq8/Mnoc2cvr9Teqwy1wjlW/oeFthny8/JWDFFk2xgyaytVS0cbBtb2qnooKoD0PsGJsPltjf67PMsQi0Fe16btrIHyZO80e+DMkwox+dcVdp0rPth5d89SW5SvB5tpVdXY21vr+bKxU1Nk9ETxSG37tSo3HQqt9l7DtG3PudT+iaDGLSZLx1DQGLXHd6lyfIPlM5u0sTrI5FycVIczcsdzQvLhdpeoB/xcD2j16NAj2zIbl/VlWCnJ4XJgH9rS3Ah4RQ3l9jhMHwW0UUFSYMUjl6FEwn7w93cRtAEiQUXcYHphamw=
notifications:
  slack:
    secure: J4GKn5vY7RmegqytRDM9Au3qFO6igMAYysZfc/OyDC+yYhz2XkVPVrbUAeLQ4fdX2SgOx5O/cmSVtvs0S8L9XtKTmJIYxVJjVTZgVmjHkImEwqKHWs6pdXPNMPzbsvFKv6QZtRHtVHvrg51vIGn5KLpWxTD6rhvH2hY8q9OO5TbUjbaXgQNqYYlwa0x6K8nTDscBSXb3kRzqqsNKKRfOUK+pb0LIzM0llP/FQbBqj3glWHRJCf7bWGi6zFqwIRg+AmG714E1aiKG7qorQWgAng9znTZ7SpobgiR6WOB7i2EqtnTAHUzrRS4kO/wxUpBCwWEpUwn+73f8axXSY7qYUPiJh18tOTyd5/2iYOe6FX3lX33Py3ePksYpNfmynFxPS1jzv6HghcTLsJ5DwlU4DewhLGeO1D2JY6uA6FmWeXF0BJAD/BEMhjIRb1f/kEv75f7tpyA+1jAzv2uQg+uiOZZKmkog0810WF8SmrS63xYY/bn137RYdYHwJA6wUxWnPnbzlwPQOF39U5t2tacJVJpxMbg4877zI4djeDWqTRFK2xzg24QVh4x17J8J+yr0OlnDkYU03yGkhRyi5t2ay1k3fS2xnMS/vjD509wkAnLFy5596vvu6sRlLP9s3QOZJWgagJbof/iJDk7W39kOWpg17eMPXZQISFEcAMj/eh8=
    on_success: change
    on_failure: always
